<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">


<select id="listAll"  resultType="com.web.board.vo.BoardVO" parameterType="com.web.board.vo.BoardVO">
	SELECT bno, title, content, writer, regdate, viewcnt
	FROM tbl_board
	ORDER BY bno desc
</select>

<select id="view" resultType="com.web.board.vo.BoardVO" parameterType="com.web.board.vo.BoardVO">
	SELECT bno, title, content, writer, regdate, viewcnt 
	FROM tbl_board
	WHERE bno = #{bno}
</select>
<!-- 
<insert id="insert" parameterType="com.web.board.vo.BoardVO">
      <selectKey resultType="string" keyProperty="bno" order="BEFORE">
         SELECT
         ISNULL(MAX(BNO),0)+1 AS BNO
         FROM tbl_board

      </selectKey>
      insert into tbl_board(
         bno
         ,title
         ,content
         ,writer
         ,regdate
         ,viewcnt
      ) values(
         ${bno}
         ,${title}
         ,${content}
         ,${writer}
         ,now()
         ,'1'
      )
   </insert>
  -->  
<insert id="insert" parameterType="com.web.board.vo.BoardVO">
      <selectKey resultType="string" keyProperty="bno" order="BEFORE">
         SELECT
         ISNULL(MAX(BNO),0)+1 AS BNO
         FROM tbl_board

      </selectKey>
      insert into tbl_board(
         title
         ,content
         ,writer
         ,regdate
         ,viewcnt
      ) values(
         ${title}
         ,${content}
         ,${writer}
         ,now()
         ,2
      )
   </insert>

<update id="increaseViewCnt">
	UPDATE tbl_board SET viewcnt = viewcnt+1
	WHERE bno = #{bno}
</update>

<update id="update">
	UPDATE	tbl_board
	SET	title = #{title}
			content = #{content}
			writer = #{writer}
	WHERE	bno = #{bno} 
</update>

<delete id="delete" parameterType="com.web.board.vo.BoardVO">
	DELETE FROM tbl_board
	WHERE bno = #{bno}
</delete>

</mapper>